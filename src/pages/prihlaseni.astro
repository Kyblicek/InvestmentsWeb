---
import Layout from '../layouts/Layout.astro';

const user = Astro.locals.user;
if (user?.role === 'ADMIN') {
  return Astro.redirect('/admin');
}

const errorMessage = Astro.url.searchParams.get('error');
---
<Layout title="René Rypar | Přihlášení" description="Přihlášení do administrace webu." metaImage="/assets/IMG_6170.jpg">
  <section class="bg-[#f5f5f5] py-24">
    <div class="mx-auto flex w-full max-w-md flex-col gap-10 rounded-3xl bg-white p-10 shadow-lg">
      <header class="space-y-2 text-center">
        <h1 class="font-serif text-3xl">Přihlášení</h1>
        <p class="text-sm text-neutral-600">Použijte přístupové údaje správce.</p>
      </header>

      {errorMessage && (
        <div class="rounded-md border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700">
          {errorMessage}
        </div>
      )}

      <form method="post" action="/api/auth/login" class="space-y-6">
        <label class="block space-y-2">
          <span class="text-xs uppercase tracking-[0.3em] text-neutral-500">Email</span>
          <input
            type="email"
            name="email"
            required
            class="w-full rounded-lg border border-neutral-200 px-4 py-3 text-base outline-none focus:border-neutral-400"
            placeholder="admin@rrinvestments.eu"
          />
        </label>

        <label class="block space-y-2">
          <span class="text-xs uppercase tracking-[0.3em] text-neutral-500">Heslo</span>
          <input
            type="password"
            name="password"
            required
            class="w-full rounded-lg border border-neutral-200 px-4 py-3 text-base outline-none focus:border-neutral-400"
            placeholder="••••••••"
          />
        </label>

        <button
          type="submit"
          class="w-full rounded-full bg-neutral-900 px-4 py-3 text-sm uppercase tracking-[0.3em] text-white transition hover:bg-neutral-700"
        >
          Přihlásit se
        </button>
      </form>
      <p class="text-center text-xs text-neutral-500">
        Potřebujete účet? Kontaktujte správce systému.
      </p>
    </div>
  </section>
</Layout>
